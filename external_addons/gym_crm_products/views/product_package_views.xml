<odoo>
  <!-- Product Package Views -->
  <record id="view_crm_product_package_tree" model="ir.ui.view">
    <field name="name">crm.product.package.tree</field>
    <field name="model">crm.product.package</field>
    <field name="arch" type="xml">
      <tree string="Product Packages">
        <field name="name"/>
        <field name="expiration_date"/>
        <field name="tag_ids" widget="many2many_tags"/>
      </tree>
    </field>
  </record>

  <!-- Product Package Form -->
  <record id="view_crm_product_package_form" model="ir.ui.view">
    <field name="name">crm.product.package.form</field>
    <field name="model">crm.product.package</field>
    <field name="arch" type="xml">
      <form string="Product Package">
        <sheet>
          <group>
            <field name="name"/>
            <field name="expiration_date"/>
            <field name="tag_ids" widget="many2many_tags"/>
          </group>
          <notebook>
            <page string="Products">
              <field name="package_line_ids">
                <tree editable="bottom">
                  <field name="inventory_id"/>
                  <field name="quantity"/>
                  <field name="price_unit"/>
                </tree>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- Product Package Kanban -->
  <record id="view_crm_product_package_kanban" model="ir.ui.view">
    <field name="name">crm.product.package.kanban</field>
    <field name="model">crm.product.package</field>
    <field name="arch" type="xml">
      <kanban>
        <field name="name"/>
        <field name="expiration_date"/>
        <field name="tag_ids"/>
        <templates>
          <t t-name="kanban-box">
            <div class="oe_kanban_global_click">
              <strong>
                <field name="name"/>
              </strong>
              <div>
                <field name="tag_ids" widget="many2many_tags"/>
              </div>
              <div>
                <span>Expires:
                  <field name="expiration_date"/>
                </span>
              </div>
            </div>
          </t>
        </templates>
      </kanban>
    </field>
  </record>

  <!-- Product Package Search -->
  <record id="view_crm_product_package_search" model="ir.ui.view">
    <field name="name">crm.product.package.search</field>
    <field name="model">crm.product.package</field>
    <field name="arch" type="xml">
      <search>
        <field name="name"/>
        <field name="tag_ids"/>
        <field name="expiration_date"/>
        <filter name="active" string="Active Packages"
                domain="['|',('expiration_date','=',False),('expiration_date','>=',context_today())]"/>
        <filter name="expired" string="Expired Packages"
                domain="[('expiration_date','&lt;',context_today())]"/>
        <group expand="0" string="Group By">
          <filter name="group_by_expiration" string="Expiration Date" context="{'group_by':'expiration_date'}"/>
          <filter name="group_by_tags" string="Tags" context="{'group_by':'tag_ids'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- Product Package Action -->
  <record id="action_crm_product_package" model="ir.actions.act_window">
    <field name="name">Product Packages</field>
    <field name="res_model">crm.product.package</field>
    <field name="view_mode">tree,form,kanban</field>
    <field name="search_view_id" ref="view_crm_product_package_search"/>
  </record>

  <!-- Product Package Menu -->
  <menuitem
    id="menu_crm_product_package"
    name="Product Packages"
    parent="gym_inventory.gym_inventory_menu_root"
    action="action_crm_product_package"
    sequence="20"
    groups="base.group_system"/>
</odoo>
